
(function(a){FormValidation.AddOn.mandatoryIcon={html5Attributes:{icon:"icon"},init:function(c,m){if(!m||!m.icon){return}var h=this,j=c.getNamespace(),b=c.getOptions();for(var k in b.fields){c.getFieldElements(k).each(function(){var o=a(this),n=o.data(j+".icon"),i=b.fields[k].validators;if(i.notEmpty&&i.notEmpty.enabled!==false&&b.fields[k].enabled!==false&&h._isEmpty(c,o)){n.addClass(m.icon).show()}})}var l=m.icon.split(" "),d={};d[c.STATUS_VALID]=[];d[c.STATUS_INVALID]=[];d[c.STATUS_VALIDATING]=[];if(b.icon){var g={};g[c.STATUS_VALID]=b.icon.valid?b.icon.valid.split(" "):[];g[c.STATUS_INVALID]=b.icon.invalid?b.icon.invalid.split(" "):[];g[c.STATUS_VALIDATING]=b.icon.validating?b.icon.validating.split(" "):[];for(var e in g){for(var f=0;f<l.length;f++){if(a.inArray(l[f],g[e])===-1){d[e].push(l[f])}}d[e]=d[e].join(" ")}}c.getForm().on(b.events.fieldStatus,function(p,o){var n=o.element.data(j+".icon"),i=o.fv.getOptions(o.field).validators;if(i.notEmpty&&i.notEmpty.enabled!==false&&b.fields[o.field].enabled!==false){(b.icon&&(b.icon.valid||b.icon.invalid||b.icon.validating))?n.removeClass(d[o.status]):n.removeClass(m.icon);if(o.status===c.STATUS_NOT_VALIDATED&&h._isEmpty(c,o.element)){n.addClass(m.icon).show()}}})},_isEmpty:function(b,c){return !FormValidation.Validator.notEmpty.validate(b,c)}}}(jQuery));